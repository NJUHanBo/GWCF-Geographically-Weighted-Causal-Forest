% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/00_data_prep.R
\name{prep_from_sf}
\alias{prep_from_sf}
\title{Prepare Data from sf Object}
\usage{
prep_from_sf(
  sf_obj,
  y_col,
  w_col,
  x_cols,
  coord_type = c("centroid", "point"),
  target_crs = NULL,
  drop_na = TRUE
)
}
\arguments{
\item{sf_obj}{An sf object (points or polygons).}

\item{y_col}{Character, name of the outcome variable column.}

\item{w_col}{Character, name of the treatment variable column.}

\item{x_cols}{Character vector, names of covariate columns.}

\item{coord_type}{Character, how to extract coordinates for polygons:
"centroid" (default) uses polygon centroids,
"point" assumes input is already points.}

\item{target_crs}{Optional CRS to transform coordinates to (e.g., EPSG code).
If NULL, uses original CRS. Recommended: use projected CRS for local studies.}

\item{drop_na}{Logical, whether to remove rows with NA values (default TRUE).}
}
\value{
A list with components:
  \item{Y}{Numeric vector of outcomes}
  \item{W}{Numeric vector of treatment}
  \item{X}{Matrix of covariates}
  \item{coords}{Matrix of coordinates (n x 2)}
  \item{crs}{CRS of the coordinates}
  \item{n}{Number of observations}
  \item{removed_na}{Number of rows removed due to NA}
}
\description{
Extracts Y, W, X, and coordinates from an sf object for use with gw_causal_forest.
}
\examples{
\dontrun{
library(sf)

# From shapefile
shp <- st_read("districts.shp")

data <- prep_from_sf(
  sf_obj = shp,
  y_col = "gdp_growth",
  w_col = "policy_treated",
  x_cols = c("population", "education", "industry_share")
)

# Fit model
fit <- gw_causal_forest(
  Y = data$Y,
  W = data$W,
  X = data$X,
  coords = data$coords,
  treatment_type = "binary"
)
}

}
